{% extends "chatbot_admin/layouts/base.html" %}
{% load static %}
{% block content %}
<link href="{% static '/chatbot_admin/assets/css/style_apariencia.css' %}" rel="stylesheet" type="text/css" id="dark-style">



<div class="container-fluid">
  <div class="row">
    <div class="col-12">
      <div class="page-title-box">
        <div class="page-title-right">
          <ol class="breadcrumb m-0">
            <li class="breadcrumb-item"><a href="javascript: void(0);">CHATBOT</a>
            </li>
            <li class="breadcrumb-item active">Personalizar</li>
          </ol>
        </div>
        <h4 class="page-title"">Personalizar chatbot</h4>
      </div>
    </div>
  </div>
  <div class=" row">
          <div class="col-xl-4 col-lg-6">
            <div class="card border-info border card-h-100">
              <div class="card-body">
                <ul class="nav nav-tabs mb-3">
                  <li class="nav-item">
                    <a href="#inici_chatbot" data-bs-toggle="tab" aria-expanded="false" id="li_cb"
                      class="nav-link active">
                      <i class="mdi mdi-home-variant d-md-none d-block"></i>
                      <span class="d-none d-md-block">Inicio del Chatbot</span>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a href="#cuerpo_chatbot" data-bs-toggle="tab" aria-expanded="true" id="li_cb2" class="nav-link">
                      <i class="mdi mdi-account-circle d-md-none d-block"></i>
                      <span class="d-none d-md-block">Chatear</span>
                    </a>
                  </li>
                </ul>
                <div class="tab-content">
                  <div class="tab-pane show active" id="inici_chatbot">

                    <div class="chat is-visible">

                      <div id="chat_color" class="chat_header" style="display: block;">

                        <div class="chat_option">

                          <div class="header_img" style="margin-bottom: 8px;">

                            <img src="{% static 'chatbot_admin/assets/images/default.png' %}" class="reem_img_logo">

                          </div>

                          <span id="chat_head" style="font-weight: bold;" class="pr_tl2">Nombre Chatbot</span> <br>
                          <span class="agent">.</span>
                          <span class="online" style="font-weight: bold;">En Línea</span>
                          <span id="chat_fullscreen_loader" class="chat_fullscreen_loader" style="display: none;"><i class="fullscreen zmdi zmdi-window-maximize"></i></span>

                        </div>

                      </div>

                      <div class="chat_body chat_login">

                        <a id="chat_third_screen" class="fab is-visible"><i class="uil-arrow-right"></i></a>
                        <p id="pr_frm">Complete el siguiente formulario para comenzar a chatear con el próximo agente
                          disponible.
                        </p>
                        <div id="form_id">
                          <div class="field">
                            <input type="text" placeholder="Ingresa tu nombre" id="txtusuario" name="txtusuario">
                          </div>
                          <p style="text-align: center;color: red;display: none" id="camp_obli">campo obli</p>
                        </div>

                      </div>

                    </div>

                  </div>
                  <div class="tab-pane" id="cuerpo_chatbot">

                    <div class="chat is-visible">

                      <div id="chat_color2" class="chat_header" style="display: block;">

                        <div class="chat_option">

                          <div class="header_img" style="margin-bottom: 8px;">

                            <img src="{% static 'chatbot_admin/assets/images/default.png' %}">

                          </div>

                          <span id="chat_head" style="font-weight: bold;" class="pr_tl">Nombre Chatbot</span> <br> <span
                            class="agent">.</span>
                          <span class="online" style="font-weight: bold;">En Línea</span>
                          <span id="chat_fullscreen_loader" class="chat_fullscreen_loader" style="display: block;"><i
                              class="fullscreen zmdi zmdi-window-maximize"></i></span>

                        </div>

                      </div>

                      <div id="chat_form" class="chat_converse chat_form" style="display: block;">


                        <div class="chat_msg_item chat_msg_item_admin">
                          <span class="pr_terminos_condiciones">Términos y condiciones</span>: <a href="#"
                            class="pr_terminos_condiciones_link">link</a>
                          <center>
                            <button id="t_y_c_a" class="t_y_c">Aceptar</button>
                            <button id="t_y_c_r" class="t_y_c">Rechazar</button>
                          </center>
                        </div>
                        <span class="chat_msg_item chat_msg_item_user chat_rpta">Aceptar</span>
                        <span class="chat_msg_item chat_msg_item_admin">Hola <b>{nombre}</b> , Gracias por aceptar
                          nuestros T&C</span>
                        <span class="chat_msg_item chat_msg_item_admin pr_terminos_condiciones_link_aceptar">bienvenido a nuestro sitio, si necesita ayuda,simplemente responda a este mensaje, estamos en línea y listos para ayudar.</span>


                        <span class="chat_msg_item chat_msg_item_user chat_rpta">Rechazar</span>

                        <span class="chat_msg_item chat_msg_item_admin pr_terminos_condiciones_link_rechazar">Nos apena
                          que no aceptes nuestros T&C. Lamentablemente no podemos brindarte ayuda por este medio.</span>



                      </div>

                      <div class="fab_field">
                        <a id="fab_camera" class="fab is-visible"><i class="mdi mdi-microphone"></i></a>
                        <a id="fab_send" class="fab is-visible"><i class="mdi mdi-telegram"></i></a>
                        <input type="text" id="chatSend" name="chat_message" placeholder="Escribe aquí..." class="chat_field chat_message"></div>

                    </div>



                  </div>
                </div>
                <center id="cam____logo">
                  
                </center>
              </div>
            </div>
          </div>
          <div class="col-xl-8 col-lg-6">
            <div class="card border-info border card-h-100">
              <div class="card-body">
                <ul class="nav nav-tabs mb-3">
                  <li class="nav-item">
                    <a href="#fuerahorario" data-bs-toggle="tab" aria-expanded="true" class="nav-link active">
                      <i class="mdi mdi-account-circle d-md-none d-block"></i>
                      <span class="d-none d-md-block">Personalizar</span>
                    </a>
                  </li>
                </ul>
                <div class="tab-content">
                  <div class="tab-pane show active" id="fuerahorario">
                    <div class="container row">
                      <div class="col-lg-12">
                        <h4 class="mt-2">Personalizar el chatbot</h4>
                        <p class="text-muted mb-4">Rellene el siguiente formulario para
                          personalizar su chatbot.</p>
                        {% csrf_token %}


                        <form enctype="multipart/form-data" class="all__div" method="POST" >

                          <div class="row">

                            <div class="col-md-6">

                              <div class="mb-3">
                                <label class="form-label">Nombre de chatbot</label>
                                <input type="text" class="form-control" maxlength="15" data-toggle="maxlength" required onkeyup="myFunctionT()" placeholder="Ingresa un título a tu chatbot" id="frm_ptitulo">

                                <input type="hidden" id="id_pr_ct">

                                <script>

                                  var Ls = localStorage.getItem('datos')
                                  var id_empresa = JSON.parse(Ls).id_empresa;
                                  document.getElementById('id_pr_ct').value=id_empresa

                                </script>



                                <p id="xyz01" style="color: #fa5c7c;font-weight: bold;"></p>
                              </div>

                              <div class="mb-3">
                                <label for="frm_pdatos"
                                  class="form-label">Formulario</label>
                                <textarea data-toggle="maxlength" class="form-control" maxlength="100" rows="3" onkeyup="myFunctionBTND()" placeholder="Ingresa un texto al completar sus datos" id="frm_pdatos"></textarea>
                                <p id="xyz03" style="color: #fa5c7c;font-weight: bold;"></p>
                              </div>


                              <div class="row mb-3">

                                <div class="col-sm-6">

                                  <div class="mb-2">
                                      <label for="color_chatbot" class="form-label">Color chatbot</label>
                                      <input type="hidden" id="val_rpta_color_chatbot" value="#727cf5">
                                      <input type="hidden" id="val_rpta_color_chatbot_per" value="">
                                      <select class="form-select" id="color_chatbot" name="color_chatbot">
                                          <option disabled selected value="-1">Selecciona una opción</option>
                                          <option value="paleta">Paleta de colores</option>
                                          <option value="personalizado">Personalizado</option>
                                      </select>
                                  </div>

                                  <div class="mb-3 val_seleccion_c">
                                      
                                  </div>


                                </div>



                                <div class="col-sm-6">

                                  <div class="mb-2">
                                      <label for="color_chatbot_acciones" class="form-label">Color botones | Acciones</label>
                                      <input type="hidden" id="val_rpta_color_chatbot_acciones" value="#727cf5">
                                      <input type="hidden" id="val_rpta_color_chatbot_acciones_per" value="">
                                      <select class="form-select" id="color_chatbot_acciones" name="color_chatbot_acciones">
                                          <option disabled selected value="-1">Selecciona una opción</option>
                                          <option value="paleta">Paleta de colores</option>
                                          <option value="personalizado">Personalizado</option>
                                      </select>
                                  </div>

                                  <div class="mb-3 val_seleccion_c_p">
                                      
                                  </div>

                                  <!-- <div class="mb-3">
                                      <input class="form-control" id="color_chatbot_acciones" type="color" name="color_chatbot_acciones" value="#727cf5">
                                  </div> -->

                                </div>
                              </div>
                              

                            </div>


                            <div class="col-md-6">

                              <div class="mb-3">
                                <label for="frm_pdatos" class="form-label">Términos y
                                  Condiciones</label>
                                <textarea data-toggle="maxlength" class="form-control"
                                  maxlength="150" rows="3" onkeyup="myFunctionBTN()" placeholder="Términos y Condiciones" id="frm_pboton"></textarea>
                                <p id="xyz02" style="color: #fa5c7c;font-weight: bold;"></p>
                              </div>

                              <div class="mb-3">
                                <label for="frm_pboton" class="form-label">Link</label>
                                <input class="form-control" type="text" style="color:#727cf5" placeholder="Link" id="frm_link" onkeyup="myFunctionLink()" maxlength="100" data-toggle="maxlength">
                                <p id="xyz04" style="color: #fa5c7c;font-weight: bold;"></p>
                              </div>


                              <div class="mb-3">
                                <label for="frm_pdatos" class="form-label">Aceptar</label>
                                <textarea data-toggle="maxlength" class="form-control" maxlength="150" rows="3" onkeyup="myFunction_t_y_c_aceptar()" placeholder="Ingresa un texto al completar sus datos" id="frm_t_y_c_aceptar"></textarea>
                                <p id="xyz05" style="color: #fa5c7c;font-weight: bold;"></p>
                              </div>


                              <div class="mb-3">
                                <label for="frm_pdatos" class="form-label">Rechazar</label>
                                <textarea data-toggle="maxlength" class="form-control" maxlength="150" rows="3" onkeyup="myFunction_t_y_c_rechazar()" placeholder="Ingresa un texto al completar sus datos" id="frm_t_y_c_rechazar"></textarea>
                                <p id="xyz06" style="color: #fa5c7c;font-weight: bold;"></p>
                              </div>



                            </div>


                          </div>

                          <center id="btn_save_upadte"></center>

                        </form>

                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
      </div>
    </div>


<div class="modal fade" id="centermodal" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="myCenterModalLabel">Actualizar logo</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-hidden="true"></button>
            </div>
            <div class="modal-body cls_all_logo">
                <center>
                  <img src="/static/chatbot_admin/assets/images/default.png" class="previsualizar img-responsive rounded-circle" style="width: 90px;height: auto;">

                  <div class="row g-2 mt-1 mb-2">
                      <div class="col-sm-12">
                          <label class="form-label">Subir foto</label>
                          <input class="form-control imagen_logo" type="file" id="img__logo">
                          <input type="hidden" id="logo_old__img" name="logo_old__img">
                      </div>
                  </div>
                  <div class="sav_lo_ed">
                    <button type="button" class="btn btn-success" onclick="add_logo_chatbot(this)"> <i class="mdi mdi-thumb-up-outline"></i> </button> 
                    <!-- <button class="btn btn-success" type="button" disabled> 
                      <span class="spinner-border spinner-border-sm me-1" role="status" aria-hidden="true"></span> 
                      Guardando... 
                    </button> -->

                  </div>
                </center>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<script src="{% static 'chatbot_admin/assets/js/personalizar.js' %}"></script>
<script>
  document.querySelector(".imagen_logo").addEventListener("change",function(){
    var imagen = this.files[0];
    console.log("ABC :",imagen)
    if (imagen["type"] != "image/jpeg" && imagen["type"] != "image/png" && imagen["type"] != "image/gif") {
        document.querySelector(".imagen_logo").value = "";
        Swal.fire({
            position: 'top-center',
            icon: 'error',
            title: 'Error al subir la imagen',
            text: "¡La imagen debe estar en formato JPG o PNG!",
            showConfirmButton: false,
            timer: 1800
        })
    
    }else {

        $(".previsualizar").attr("src", "/static/chatbot_admin/assets/images/load.gif");

        var datosImagen = new FileReader;
        datosImagen.readAsDataURL(imagen);
        $(datosImagen).on("load", function (event) {

            var rutaImagen = event.target.result;
            console.log(rutaImagen);

            $(".previsualizar").attr("src", rutaImagen);

        })
    }

  })
</script>
    {% endblock content %}